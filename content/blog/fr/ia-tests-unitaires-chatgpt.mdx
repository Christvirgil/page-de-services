---
title: "Comment j'utilise l'IA (ChatGPT) pour Écrire des Tests Unitaires Plus Rapidement"
date: '2025-07-03'
description: "Écrire des tests est crucial, mais souvent fastidieux. Découvrez comment un prompt bien formulé peut transformer ChatGPT en un assistant de test ultra-efficace, vous faisant gagner des heures de travail."
category: 'Développement'
tags: ['IA', 'Tests', 'Qualité', 'PHP']
---

Soyons honnêtes : tout le monde sait que les tests unitaires sont importants. Ils sont le filet de sécurité qui nous permet de refactoriser sans peur, de déployer avec confiance et de dormir la nuit. Mais tout le monde sait aussi que les écrire peut être répétitif et chronophage.

C'est là que l'IA entre en jeu. Depuis quelques mois, j'ai intégré ChatGPT dans mon workflow de test, non pas pour remplacer ma réflexion, mais pour **accélérer l'écriture du code "boilerplate"** et me suggérer des cas de tests auxquels je n'aurais pas pensé.

Le secret ne réside pas dans l'outil, mais dans la manière de lui parler. Voici ma méthode.

## L'Anatomie d'un Prompt Efficace

Demander simplement "Écris un test pour cette fonction" donnera des résultats médiocres. Un bon prompt doit fournir un **contexte complet**.

Voici la structure que j'utilise :

1.  **Le Rôle :** "Agis comme un développeur senior expert en tests automatisés..."
2.  **Le Contexte Technique :** "...spécialisé dans le framework de test `[Pest/PHPUnit pour Laravel, Jest pour Node.js, etc.]`."
3.  **La Tâche :** "Écris une série de tests unitaires pour la fonction suivante."
4.  **Le Code à Tester :** Collez ici votre fonction, avec les types si possible.
5.  **Les Instructions Précises :** "Assure-toi de couvrir les cas suivants :
    *   Le cas nominal (tout se passe bien).
    *   Les cas limites (valeurs nulles, chaînes vides, zéros).
    *   Les cas d'erreur (exceptions attendues)."

## Exemple Concret : Tester un simple "Calculator" en PHP/Laravel

Imaginons cette classe très simple dans un projet Laravel :

```php
// Fichier : app/Services/SimpleCalculator.php
namespace App\Services;

class SimpleCalculator
{
    public function add(int|float $a, int|float $b): int|float
    {
        return $a + $b;
    }

    public function divide(int|float $a, int|float $b): int|float
    {
        if ($b == 0) {
            throw new \InvalidArgumentException('Cannot divide by zero.');
        }
        return $a / $b;
    }
}
```
Maintenant, appliquons notre prompt.

Mon prompt pour ChatGPT :
```
Agis comme un développeur senior expert en tests automatisés, spécialisé dans le framework de test Pest pour Laravel.
Écris une série de tests unitaires complets pour la classe SimpleCalculator suivante.

Assure-toi de couvrir les cas suivants pour la méthode divide :
- La division de deux nombres positifs.
- La division par un nombre négatif.
- La division de zéro par un nombre.
- Le cas où le diviseur est zéro, qui doit lever une InvalidArgumentException.
```

Le Résultat Généré par l'IA (Souvent 90% correct)
ChatGPT va probablement générer un fichier de test qui ressemble à ça :

```php
// Fichier : tests/Unit/SimpleCalculatorTest.php

use App\Services\SimpleCalculator;

beforeEach(function () {
    $this->calculator = new SimpleCalculator();
});

it('adds two positive numbers', function () {
    expect($this->calculator->add(2, 3))->toBe(5);
});

it('divides two positive numbers', function () {
    expect($this->calculator->divide(10, 2))->toBe(5);
});

it('divides by a negative number', function () {
    expect($this->calculator->divide(10, -2))->toBe(-5);
});

it('divides zero by a number', function () {
    expect($this->calculator->divide(0, 5))->toBe(0);
});

it('throws an exception when dividing by zero', function () {
    $this->calculator->divide(10, 0);
})->throws(\InvalidArgumentException::class, 'Cannot divide by zero.');
```
Ce code est quasi parfait. Il a compris le contexte de Pest, il a écrit des tests clairs et il a même utilisé la syntaxe élégante de Pest pour tester les exceptions. Mon travail se résume à copier, coller, et peut-être ajuster un détail. J'ai gagné 10 minutes.
Conclusion : L'IA comme Stagiaire, pas comme Remplaçant
Utiliser l'IA pour les tests ne vous dispense pas de comprendre ce que vous testez. Le développeur reste le pilote. Mais au lieu de taper manuellement chaque test, vous décrivez ce que vous voulez, et l'IA se charge de la syntaxe.
C'est un gain de productivité énorme qui vous libère du temps pour vous concentrer sur la logique complexe et la conception de votre application.
Améliorer la Qualité de votre Code est un Investissement
Une bonne couverture de test n'est pas un luxe, c'est l'assurance-vie de votre projet. Elle garantit sa maintenabilité et sa capacité à évoluer sans régressions.
Si vous voulez mettre en place une stratégie de test robuste pour votre application ou former votre équipe aux bonnes pratiques, je propose des sessions de coaching et des audits de qualité de code.
Discutons de la qualité de votre code.