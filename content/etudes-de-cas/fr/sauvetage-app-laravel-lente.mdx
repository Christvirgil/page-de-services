---
title: "Sauvetage d'une App Laravel Lente : Temps de Réponse Divisé par 10"
slug_en: "rescuing-a-slow-laravel-app"
date: '2025-07-29'
client: "SaaS de Gestion de Projets"
problem: "Lenteur critique de l'application, menaçant la rétention des utilisateurs."
solution: "Audit de performance, identification et correction de requêtes N+1 et ajout d'index de base de données."
result: "Temps de chargement des pages clés réduit de 5s à moins de 500ms."
---

## Le Contexte : Un SaaS Prometteur au Bord de l'Effondrement

Mon client, appelons-le "ProjectFlow", avait développé un excellent SaaS de gestion de projets. L'outil était apprécié pour ses fonctionnalités, mais il souffrait d'un mal qui ronge de nombreuses applications en croissance : **la lenteur.**

Les pages listant les tâches et les projets mettaient parfois plus de 5 secondes à s'afficher, rendant l'expérience utilisateur frustrante. L'équipe de ProjectFlow recevait de plus en plus de plaintes, et leur taux de désabonnement commençait à augmenter dangereusement. Ils étaient sur le point de perdre des clients à cause d'un problème purement technique.

## Le Défi : Identifier le Goulot d'Étranglement

L'équipe de développement de ProjectFlow, très compétente sur les aspects fonctionnels, n'arrivait pas à identifier la source exacte du problème. Le serveur était puissant, le code semblait propre à première vue. C'est là que je suis intervenu avec une mission claire : **réaliser un audit de performance complet pour trouver et éliminer le goulot d'étranglement.**

### Mon approche a été méthodique

<ol>
  <li><strong>Analyse Statique du Code :</strong> J'ai d'abord examiné les relations Eloquent et la manière dont les données étaient appelées dans les contrôleurs et les vues Blade.</li>
  <li><strong>Monitoring des Requêtes :</strong> J'ai utilisé Laravel Telescope et des outils de profiling de base de données pour observer en temps réel les requêtes SQL exécutées lors du chargement des pages critiques.</li>
</ol>

Le diagnostic est tombé très rapidement et a révélé deux problèmes classiques mais dévastateurs.

## La Solution : Deux Optimisations Ciblées

### 1. Éradication des Requêtes N+1

### Le problème des requêtes N+1

<ul>
  <li>1 requête pour récupérer les 50 projets.</li>
  <li>50 requêtes supplémentaires pour récupérer le nom du client associé à chaque projet.</li>
  <li>50 autres requêtes pour récupérer le nombre de tâches de chaque projet.</li>
</ul>

**Total : 101 requêtes pour une seule page !**

La solution a été d'implémenter l'**Eager Loading** de Laravel. En modifiant une seule ligne de code, nous sommes passés de 101 requêtes à seulement 3 requêtes optimisées.

**Avant :**
```php
$projects = Project::all(); // 1 requête
// Boucle avec $project->client->name et $project->tasks->count() -> N+N requêtes
```

**Après :**
```php
$projects = Project::with('client', 'tasks')->get(); // 3 requêtes !
```

### 2. Ajout d'Index Stratégiques

Le second problème venait de la recherche. La table `tasks` contenait des centaines de milliers d'entrées, mais la colonne `user_id` n'était pas indexée. Chaque fois qu'un utilisateur voulait voir ses tâches, la base de données devait scanner la table entière.

En ajoutant un simple index sur cette colonne, les requêtes de recherche sont devenues quasi instantanées.

```sql
CREATE INDEX idx_tasks_user_id ON tasks (user_id);
```

## Les Résultats : Une Application Transformée

<ul>
  <li><strong>Temps de chargement moyen des pages critiques réduit de 5 secondes à moins de 500 millisecondes.</strong> (Une amélioration de 90%).</li>
  <li><strong>Charge du serveur de base de données diminuée de 70%</strong>, permettant de gérer plus d'utilisateurs simultanés sans augmenter les coûts d'infrastructure.</li>
  <li><strong>Satisfaction client en hausse</strong> et arrêt de l'hémorragie des désabonnements.</li>
</ul>

Cette étude de cas montre qu'il n'est pas toujours nécessaire de réécrire une application entière ou d'investir dans des serveurs plus coûteux. Un audit ciblé et une expertise technique peuvent apporter des gains de performance massifs et sauver un business.